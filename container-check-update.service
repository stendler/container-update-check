[Unit]
Description=Container update check 
Requires=podman.socket
Wants=network-online.target
After=network-online.target
RequiresMountsFor=%t/containers

[Service]
Type=oneshot
ExecStart=/usr/bin/podman run --rm \
    --volume=%t/podman:/run/podman:z \
    --log-driver=journald \
    --security-opt label=disable \
    localhost/container-check-update
SuccessExitStatus=0 2

# Hardening
ProtectSystem=full
PrivateTmp=true
MemoryDenyWriteExecute=true
NoNewPrivileges=true